!function(){var a=!1,b=/xyz/.test(function(){})?/\b_super\b/:/.*/;this.Class=function(){},Class.extend=function(c){function d(){!a&&this.init&&this.init.apply(this,arguments)}var e=this.prototype;a=!0;var f=new this;a=!1;for(var g in c)f[g]="function"==typeof c[g]&&"function"==typeof e[g]&&b.test(c[g])?function(a,b){return function(){var c=this._super;this._super=e[a];var d=b.apply(this,arguments);return this._super=c,d}}(g,c[g]):c[g];return d.prototype=f,d.prototype.constructor=d,d.extend=arguments.callee,d}}();var ClientCommand={};ClientCommand.HAND_SHAKE="as-cc:hs",ClientCommand.START="as-cc:start",ClientCommand.STOP="as-cc:stop",ClientCommand.CHANGE="as-cc:chng",ClientCommand.DISCONNECT="as-cc:dc";var MultiDirectionControl=Class.extend({init:function(a){this.element=a,this.touchSupported="ontouchstart"in this.element,this.createTouchPointer(),this.getOrigin(),this.addTouchListeners(),this.axisSpace=this.element.offsetWidth/5,this.controlPoint={x:0,y:0},this.tx=0,this.ty=0,this.color="",this.onTouchStart=null,this.onTouchEnd=null},addEventListener:function(a,b){switch(a){case MultiDirectionControl.TOUCH_START:this.onTouchStart=b;break;case MultiDirectionControl.TOUCH_END:this.onTouchEnd=b;break;case MultiDirectionControl.CHANGE:this.onChange=b;break;default:console.warn("Unknown event type.")}},setColor:function(a){this.color=a},createTouchPointer:function(){this.touch=document.createElement("div"),this.touch.className="touch",document.body.appendChild(this.touch)},getOrigin:function(){var a=this.element.getBoundingClientRect(),b=a.right-a.left,c=a.bottom-a.top,d=a.left+b/2,e=a.top+c/2,f=b/2;this.origin={x:d,y:e,width:b,height:c,radius:f}},addTouchListeners:function(){var a=this;this.touchSupported?(this.element.ontouchstart=function(b){a.touchStart(b)},this.element.ontouchend=function(b){a.touchEnd(b)}):a.element.onmousedown=function(b){a.touchStart(b)}},touchStart:function(a){null!=this.onTouchStart&&this.onTouchStart(),this.touchMove(a),this.touch.style.visibility="visible",this.element.style.backgroundColor="#"+this.color,this.element.className="touchdown";var b=this;this.touchSupported?document.body.ontouchmove=function(a){b.touchMove(a),a.preventDefault()}:(document.body.onmousemove=function(a){b.touchMove(a)},document.body.onmouseup=function(a){b.touchEnd(a)})},touchEnd:function(){null!=this.onTouchEnd&&this.onTouchEnd(),this.touch.style.visibility="hidden",this.element.style.backgroundColor="#000000",this.element.className="touchup",this.touchSupported?document.body.ontouchmove=null:(document.body.onmousemove=null,document.body.onmouseup=null)},touchMove:function(a){var b=this.touchSupported?a.touches[0].pageX:a.pageX,c=this.touchSupported?a.touches[0].pageY:a.pageY,d=this.origin.x-b,e=this.origin.y-c,f=Math.sqrt(d*d+e*e),g=this.origin.radius/f;g=g>1?1:g;var h=g*b+(1-g)*this.origin.x,i=g*c+(1-g)*this.origin.y,j=this.touch.offsetWidth/2+6,k=h-j,l=i-j;this.touch.style.margin=l+"px 0 0 "+k+"px",this.setControlValues(-1*(this.origin.x-k-j),-1*(this.origin.y-l-j))},setControlValues:function(a,b){a+=this.element.offsetWidth/2,b+=this.element.offsetWidth/2;var c=Math.floor(a/this.axisSpace)-2,d=Math.floor(b/this.axisSpace)-2;(c!=this.controlPoint.x||d!=this.controlPoint.y)&&(this.controlPoint.x=c,this.controlPoint.y=d,null!=this.onChange&&this.onChange(c,d))}});MultiDirectionControl.TOUCH_START="mdc:touchStart",MultiDirectionControl.TOUCH_END="mdc:touchEnd",MultiDirectionControl.CHANGE="mdc:change";
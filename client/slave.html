<html>
  <head>
    <script src="/socket.io/socket.io.js"></script>
    <script src="js/Class.js"></script>
    <script>

      var output = null;
      var socket = null;
      var reactor = null;

      function onload()
      {			

        output = document.getElementById('output');
        socket = io.connect('http://22.155.0.3:8000');

        connections = [];

        socket.on("connect", function() {

          log('Connected');
          socket.emit("id", "slave");

        });

        socket.on("cmd-client", function(data) {

          var delim = data.indexOf(":");
          var id = data.substr(0, delim);
          var body = data.substr(delim + 1);
          var connection = getConnection(id);

          if (body == "down")
          {
              //connection.style.webkitTransform = "scale(1)";
              connection.className = 'responder grow';
          }
          else if (body == "up")
          {       
              //connection.style.webkitTransform = "scale(0)";
              connection.className = 'responder';
          }

        });
        
        function getConnection (id) 
        {
            var responder = connections[id];

            if (responder == null)
            {
              responder = createResponder();
              connections[id] = responder;
            }

            return responder;
        }

        function createResponder ()
        {
            var responder = document.createElement('div');
            //responder.style.webkitTransform = "scale(0)";
            responder.className = 'responder';
            output.appendChild(responder);
            responder.style.marginLeft = String(connections.length * 200) + "px";

            return responder;
        }

      }			

      function log(msg)
      {
        console.log(msg);
      }

    </script>
		<link rel="stylesheet" href="css/slave.css" />

    </head>
    <body onload="onload();">
      <div id="output">
        
      </div>
    </body>
</html>

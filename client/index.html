<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="/socket.io/socket.io.js"></script>
    <script src="js/Class.js"></script>
    <script src="js/MultiDirectionControl.js"></script>    
    <link rel="stylesheet" href="css/client.css" />
    <script>
       
        var SERVER = 'http://22.155.0.3:8000';
        var CMD_ID = 'cmd-client';
        var CMD_HS = 'hs';
        var CMD_UP = 'up';
        var CMD_DOWN = 'down';
        var CMD_MOVE = 'move';
        var touchPad = null;


        function onload()
    	{			
            socket = io.connect(SERVER);
            socket.on("connect", function() { 

                socket.emit("id", "client");
             });

            socket.on("hs", function(color) { 
                
                control.setColor(color);
             });

            touchPad = document.getElementById('touchPad');
            control = new MultiDirectionControl(touchPad);
            

            control.addEventListener(MultiDirectionControl.TOUCH_START, function() { 

                send({cmd:CMD_DOWN}); 
            });

            control.addEventListener(MultiDirectionControl.TOUCH_END, function() { 

                send({cmd:CMD_UP});
            })    

            control.addEventListener(MultiDirectionControl.TOUCH_MOVE, function(dx, dy) { 

                send({cmd:CMD_MOVE, dx:dx, dy:dy});
            })              
        }			

    	function send(data)
    	{
    	    socket.emit(CMD_ID, data);
    	}

    </script>		
	</head>
    <body onload="onload();">
        <div id="container">
            <div id="touchPad"></div>
        </div>
    </body>
</html>

<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="/socket.io/socket.io.js"></script>
    <script src="js/Class.js"></script>
    <script src="js/MultiDirectionControl.js"></script>
    <script>

        var ClientCommand = {};
        ClientCommand.HAND_SHAKE = 'as-cc:hs';
        ClientCommand.START = 'as-cc:start';
        ClientCommand.STOP = 'as-cc:stop';
        ClientCommand.CHANGE = 'as-cc:chng';
        ClientCommand.DISCONNECT = 'as-cc:dc';

        var SERVER = 'http://22.155.0.6:8000';
        var CMD_ID = 'cmd-client';
        var CMD_UP = ClientCommand.STOP;
        var CMD_DOWN = ClientCommand.START;
        var CMD_CHANGE = ClientCommand.CHANGE;
        var touchPad = null;

        function onload()
    	{			
            touchPad = document.getElementById('touchPad');
            control = new MultiDirectionControl(touchPad);
            socket = io.connect(SERVER);

            socket.on("connect", function() { 
                socket.emit("id", "client");
            });

            socket.on(ClientCommand.HAND_SHAKE, function(color) { 
                control.setColor(color);
            });

            control.addEventListener(MultiDirectionControl.TOUCH_START, function() { 
                send({cmd:CMD_DOWN}); 
            });

            control.addEventListener(MultiDirectionControl.TOUCH_END, function() { 
                send({cmd:CMD_UP});
            });
   
            control.addEventListener(MultiDirectionControl.CHANGE, function(cx, cy) {
                send({cmd:CMD_CHANGE, x:cx, y:cy});
            });
        }			

    	function send(data)
    	{
    	    socket.emit(CMD_ID, data);
    	}

    </script>		
    <link rel="stylesheet" href="css/client.css" />
	</head>
    <body onload="onload();">
        <div id="container">
            <div id="touchPad"></div>
        </div>
    </body>
</html>
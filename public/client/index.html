<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="/socket.io/socket.io.js"></script>
    <script src="/client/js/Class.js"></script>
    <script src="/client/js/MultiDirectionControl.js"></script>
    <script>

        var SERVER = '<%= settings.connectionURL %>';
        var CMD_ID = 'cmd-client';
        var HAND_SHAKE = '<%= settings.CMD_HAND_SHAKE %>';
        var CMD_DOWN = '<%= settings.CMD_START %>';
        var CMD_UP = '<%= settings.CMD_STOP %>';
        var CMD_CHANGE = '<%= settings.CMD_CHANGE %>';
        var DISCONNECT = '<%= settings.CMD_DISCONNECT %>';

        var touchPad = null;

        function onload()
    	{			
            touchPad = document.getElementById('touchPad');
            control = new MultiDirectionControl(touchPad);
            socket = io.connect(SERVER);

            socket.on("connect", function() { 
                socket.emit("id", "client");
            });

            socket.on(HAND_SHAKE, function() {
                //Connection
            });

            control.addEventListener(MultiDirectionControl.TOUCH_START, function() { 
                send({cmd:CMD_DOWN}); 
            });

            control.addEventListener(MultiDirectionControl.TOUCH_END, function() { 
                send({cmd:CMD_UP});
            });
   
            control.addEventListener(MultiDirectionControl.CHANGE, function(cx, cy) {
                send({cmd:CMD_CHANGE, x:cx, y:cy});
            });
        }			

    	function send(data)
    	{
    	    socket.emit(CMD_ID, data);
    	}

    </script>		
    <link rel="stylesheet" href="/client/css/client.css" />
	</head>
    <body onload="onload();">
        <div id="container">
            <div id="touchPad"></div>
        </div>
    </body>
</html>